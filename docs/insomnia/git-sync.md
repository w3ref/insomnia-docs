---
layout: article-detail
title:  Синхронизировать с Git
category: "Начать"
category-url: get-started
---

{:.alert .alert-primary}
**Примечание**: В настоящее время синхронизация с Git применяется только к проектным документам. Коллекции используют нашу собственную Insomnia Sync для управления версиями. Чтобы узнать о синхронизации управления версиями для коллекций, обратитесь к [Синхронизация управления версиями](/insomnia/version-control-sync).

Синхронизация с Git - это встроенная функция для проектных документов, которая позволяет вам настроить ваш репозиторий для работы с внешней системой управления версиями Git, такой как GitHub или BitBucket.

При отправке в удаленный репозиторий Git создается каталог `.insomnia`, который также можно использовать с [Inso CLI](/inso-cli/introduction#data-search-flow).

## Клонировать существующий удаленный репозиторий

Клонируйте удаленный документ из Git с помощью раскрывающегося списка **Создать** на панели инструментов. Вам будет предложено заполнить удаленные [**Repository Settings**](#remote-repository-settings), чтобы получить удаленный доступ.

Удаленный репозиторий должен содержать корневой каталог `.insomnia`, в противном случае вам будет предложено создать новый проектный документ.

![Щелкните раскрывающееся меню «Создать» и выберите «Git Clone»](/assets/images/git-clone.png)

## Включить Git Sync

{:.alert .alert-primary}
**Примечание**: В этом разделе предполагается, что у вас уже есть удаленный репозиторий Git.

Включите Git Sync в проектных документах, нажав кнопку **Setup Git Sync** рядом с настройками. Затем выберите **Repository Settings**. Откроется модальное окно **Configure Repository**.

![Включите Git Sync для документов, нажав кнопку Setup Git Sync внутри документа.](/assets/images/document-git-sync.png)
_Внутри проектного документа нажмите Setup Git Sync._

## Настройки удаленного репозитория

При настройке удаленного репозитория вам будет предложено ввести следующую информацию.

* **Git URI**: URI репозитория Git. Поддерживаются URL-адреса HTTPS и SSH.
* **Author Name**: Имя автора Git, которое сохраняется при каждой фиксации.
* **Author Email**: Электронная почта автора Git, которую нужно сохранять при каждой фиксации.
* **Username**: Имя пользователя автора Git, соответствующее токену аутентификации.
* **Authentication Token**: Токен, необходимый для аутентификации с помощью поставщика удаленного репозитория, такого как GitHub или BitBucket. Если в вашей учетной записи включена двухфакторная аутентификация (2FA), маловероятно, что вы сможете использовать свое имя пользователя и пароль. Вместо этого сгенерируйте личный токен доступа или пароль приложения со сферой действия, описанной ниже.

### Область действия токена и пароля приложения

{:.alert .alert-primary}
**Примечание**: Вы можете не настроить Git Sync должным образом из-за недостаточного или неправильного типа разрешений Git.

Найдите инструкции о том, как создать личный токен доступа или пароль приложения на следующих платформах:

* [Github](https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access-token)
  * Для общедоступных репозиториев при создании токена укажите как минимум [`public_repo`](https://github.com/settings/tokens/new?description=insomnia-git-sync&scopes=public_repo).
  * Для частных репозиториев при создании токена укажите как минимум [`repo`](https://github.com/settings/tokens/new?description=insomnia-git-sync&scopes=repo).
* [Gitlab](https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html)
  * Для публичных и частных репозиториев GitLab укажите как минимум `api` при создании вашего личного токена доступа.
* [Bitbucket](https://support.atlassian.com/bitbucket-cloud/docs/app-passwords/)
  * Для _приватных_ репозиториев BitBucket укажите как минимум `Read` и `Write` в параметрах `Repository` при создании пароля приложения.
* [Bitbucket Server](https://confluence.atlassian.com/bitbucketserver/personal-access-tokens-939515499.html)

После завершения нажмите **Готово**, и настройки репозитория будут сохранены для будущих операций. Сведения об авторе и токен могут быть обновлены по мере необходимости.

## Управление ветками

При работе с Git рекомендуется вносить изменения в отдельные ветки. Это дает два преимущества:

* Снижает вероятность конфликтов слияния, когда соавторы часто вносят изменения
* Поддерживает рабочий процесс pull-request, когда соавторы могут оставлять отзывы перед объединением

Локальные филиалы могут быть созданы из диалогового окна управления филиалами. В этом диалоговом окне представлены как локальные, так и удаленные ветки.

{:.alert .alert-primary}
**Примечание**: Удаленные ветки появятся только в том случае, если они еще не существуют локально.

## Зафиксировать изменения

Зафиксируйте свои изменения через раскрывающееся меню ветки. Вам будет предложено добавить описательное сообщение в качестве сообщения фиксации.

![Щелкните раскрывающееся меню ветки и выберите фиксацию.](/assets/images/commit-git-sync.png)

## Отправить изменения

При первой передаче ваших изменений в удаленный репозиторий создается каталог `.insomnia`, который вы можете использовать с [Inso CLI](/inso-cli/introduction#data-search-flow).

{:.alert .alert-primary}
**Примечание**: Если вы хотите перейти в альтернативную ветку, а не в ветку по умолчанию, щелкните раскрывающееся меню ветки. Выберите **Branches** и добавьте желаемое имя ветки.

Коммиты и ветки существуют только локально при создании. Чтобы удаленно поделиться коммитами и историей ветки, необходимо выполнить push. Если нажатие не удалось, вам будет предложено принудительное нажатие.

Операция push или force push может завершиться ошибкой по многим причинам, и журналы будут представлены в консоли разработчика с префиксом `git-event` с дополнительной отладочной информацией. Вероятная причина в том, что у вашего пользователя нет разрешений на отправку в защищенную ветку.

Например, в GitLab ветка main/master по умолчанию защищена, и те, кто играет роль разработчика, не могут напрямую к ней подключаться. В этом случае перейдите в отдельную ветку и создайте запрос на перенос или обновите разрешения для вашего пользователя в репозитории.

## Вытяните изменения

Если соавтор вносит изменения в удаленный репозиторий, потяните изменения, чтобы получить доступ к работе локально. Щелкните раскрывающееся меню ветви в документе, а затем выберите **Pull**. Любые входящие изменения будут перенесены на ваш локальный компьютер.

## Решение конфликта

Git sync в настоящее время не поддерживает возможность разрешения конфликтов в приложении. Если изменения были внесены локально или удаленно, извлечение может завершиться ошибкой.

Вот несколько стратегий, которые помогут справиться с конфликтами:

* Каждый соавтор должен вносить изменения в отдельной ветке, чтобы избежать конфликтов. Изменения должны быть объединены в мастер после проверки и утверждения другими соавторами (например, запрос на вытягивание GitHub).
* Если при извлечении возникает конфликт, удалите ветку локально и повторно загрузите ее из диалогового окна веток.
