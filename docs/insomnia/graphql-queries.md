---
layout: article-detail
title:  GraphQL-запросы
category: "Встроенные функции"
category-url: built-in-features
---

[GraphQL](https://graphql.org/) — это язык запросов для API, который использует систему типов для обеспечения корректности и удобства сопровождения. Insomnia использует эту систему типов для обеспечения автозаполнения и анализа запросов GraphQL. В этой статье объясняется, как создавать и выполнять запросы GraphQL в Insomnia.

## Использование GraphQL

Создать запрос GraphQL в Insomnia очень просто. Это можно сделать либо путем выбора типа запроса GraphQL во время создания, либо путем изменения типа тела существующего запроса с помощью меню тела.

Как только это будет сделано, вы можете заполнить раздел запроса и переменных запроса.

### Раздел запроса

Запрос — единственное обязательное поле запроса GraphQL. Запросы могут включать аргументы, комментарии, фрагменты, а также любые другие допустимые конструкции запросов. При редактировании запроса Insomnia будет предоставлять автозаполнение и сообщения об ошибках на основе схемы API.

{:.alert .alert-primary}
**Note**: Запросы GraphQL не могут включать шаблоны Insomnia, но переменные могут.

### Раздел переменных

[Переменные GraphQL](https://graphql.org/learn/queries/#variables) определяются в разделе «Переменные запроса» под запросом. Переменные должны быть определены как действительный объект JSON и при желании могут включать переменные среды и теги шаблона. Если раздел переменных оставить пустым, атрибут переменных не будет включен в полезную нагрузку запроса.

### Создайте полезную нагрузку запроса

Insomnia автоматически создает полезную нагрузку запроса GraphQL и сохраняет ее всякий раз, когда изменяется раздел запроса или переменных. Существует три возможных атрибута, составляющих запрос GraphQL.

* `query` (string): Отправляемый запрос GraphQL.
* `variables` (object): Необязательный объект переменных, которые должны быть включены в запрос.
* `operationName` (string): необязательное имя операции, заполняемое автоматически с использованием первого именованного запроса, если таковой существует.

Ниже приведен пример полезной нагрузки запроса GraphQL, в которой используются все три параметра.

```
{
    "query": "query MyQuery($id: string) { thing(id: $id) { id name created } }",
    "variables": {
        "id": "thing_123"
    },
    "operationName": "MyQuery"
}
```

{:.alert .alert-primary}
**Note**: Может быть полезно знать, что именно так Insomnia хранит тело запроса за кулисами. Попробуйте преобразовать тип тела в JSON и обратно и убедитесь сами.

### Получение схемы

Чтобы обеспечить автозаполнение и проверку ошибок запросов GraphQL, Insomnia автоматически извлекает схему, отправляя запрос [introspection](https://graphql.org/learn/introspection/). Этот запрос выполняется как при переключении на новый запрос GraphQL в приложении, так и при изменении различных свойств запроса (например, URL).

{:.alert .alert-primary}
**Note**: Все атрибуты запроса (аутентификация, заголовки и т. д.) также отправляются с запросом самоанализа

### Браузер документации

Insomnia поддерживает возможность просмотра документации для текущей конечной точки GraphQL.

Есть три способа отобразить панель документации.

1. Нажмите **Показать документацию** в раскрывающемся списке Схема рядом с запросом.
2. Наведите указатель мыши на поле и щелкните во всплывающей документации.
3. `Control+click` (на Mac) поле в запросе.
